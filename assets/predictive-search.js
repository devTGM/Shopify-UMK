if(!customElements.get("predictive-search")){class e extends HTMLElement{constructor(){super(),this.input=this.querySelector('input[type="search"]'),this.resultsContainer=this.querySelector(".js-results-container"),this.btnSubmit=this.querySelector(".js-btn-submit"),this.btnClearText=this.querySelector(".js-btn-clear-text"),this.errorMessageContainer=this.querySelector(".js-message-error"),this.errorMessageText=this.errorMessageContainer.querySelector("[data-text]"),this.timeout=null,this.isOpen=!1,this.drawer=this.closest(".js-drawer");var e=document.querySelector(".drawer__content--search"),t=document.querySelector(".search-drawer__suggestions");this.input.addEventListener("input",(s=>{clearTimeout(this.timeout),this.timeout=setTimeout((()=>{const s=this.input.value.trim();if(s.length<=0)return this.close(),window.innerWidth<990&&(e.style.height="auto"),void(t&&(t.style.display="block"));this.isOpen=!0,this.getSearchResults(s),window.innerWidth<=990&&(e.style.height="100%"),t&&(t.style.display="none")}),300)})),this.input.addEventListener("keydown",(e=>{"Escape"===e.key&&(this.input.value?this.close():this.drawer&&this.drawer.parentElement.parentElement.toggleDrawer())})),this.btnClearText.addEventListener("click",(s=>{this.close(),e.style.height="auto",t&&(t.style.display="block")}))}async getSearchResults(e){try{const t=await fetch(`${Shopify.routes.root}search/suggest?q=${e}&resources[type]=product,page,article,collection,query&resources[limit]=8&section_id=predictive-search`);if(!this.isOpen)return;if(!t.ok){throw new Error(t.status)}const s=await t.text(),i=(new DOMParser).parseFromString(s,"text/html").querySelector("#shopify-section-predictive-search").innerHTML;this.resultsContainer.innerHTML=i,this.open(),document.querySelector("quick-cart-drawer")?.initTriggers()}catch(e){this.errorMessageText.textContent=e.message,this.errorMessageContainer.classList.remove("hidden")}}open(){this.classList.add("is-open"),this.resultsContainer.classList.remove("hidden"),this.errorMessageContainer.classList.add("hidden"),this.btnSubmit.setAttribute("tabindex","-1"),this.btnClearText.removeAttribute("disabled")}close(){this.isOpen=!1,this.classList.remove("is-open"),this.resultsContainer.classList.add("hidden"),this.errorMessageContainer.classList.add("hidden"),this.input.value="",this.input.focus(),this.btnSubmit.removeAttribute("tabindex"),this.btnClearText.setAttribute("disabled",!0)}}customElements.define("predictive-search",e)}