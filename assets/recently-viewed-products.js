if(!customElements.get("recently-viewed-products")){class e extends(customElements.get("card-product-slider")){constructor(){super(),this.section=this.closest(".js-section"),this.sliderWrapper=this.querySelector(".swiper-wrapper"),this.productHandle=this.dataset.productHandle,this.fetchRecentProducts(),document.querySelector("quick-cart-drawer")&&this.querySelector(".swiper-slide")&&document.querySelector("quick-cart-drawer").init(),Shopify.designMode&&document.querySelector("quick-cart-drawer")&&this.querySelector(".swiper-slide")&&document.querySelector("quick-cart-drawer").init()}fetchRecentProducts(){const e=localStorage.getItem("recently-viewed");if(!e)return;const t=e.split(",").filter((e=>e&&e!==this.productHandle&&"undefined"!==e));0!==t.length&&t.forEach(((e,r)=>{(async()=>{try{const t=await fetch(`${window.Shopify.routes.root}products/${e}?view=card`);if(!t.ok){const t=localStorage.getItem("recently-viewed").replace(`${e},`,"").replace(e,"");return void localStorage.setItem("recently-viewed",t)}const r=await t.text(),c=document.createElement("DIV");if(c.classList.add("swiper-slide","card-product-slider__slide"),c.insertAdjacentHTML("beforeend",r),!c.querySelector("product-card")||!c.querySelector(".product-card"))return;this.sliderWrapper.append(c)}catch(e){}finally{if(!(r===t.length-1))return;this.initSlider(),this.section?.classList.remove("hidden")}})()}))}}customElements.define("recently-viewed-products",e)}