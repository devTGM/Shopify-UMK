class AgeVerificationPopup extends ModalDialog{constructor(){super(),Shopify.designMode&&window.addEventListener("shopify:section:load",this.init.bind(this)),this.init()}init(){this.ageVerified=getCookie("age-verified"),this.noButton=this.querySelector(".button-no"),this.yesButton=this.querySelector(".button-yes"),this.newsletterPopup=document.getElementById("NewsletterModal-newsletter-popup"),this.attachButtonListeners(),setTimeout((()=>{this.hasAttribute("open")&&this.classList.contains("age-verification-popup--blurred")&&document.body.classList.add("age-verification-popup-is-open")}),5e3)}connectedCallback(){Shopify.designMode?"true"===this.dataset.openInDesignMode&&this.show():this.showPopupIfNecessary()}showPopupIfNecessary(){this.ageVerified&&"false"!==this.ageVerified||(this.newsletterPopup&&this.newsletterPopup.classList.add("newsletter-popup-is-hidden"),this.show())}attachButtonListeners(){this.noButton&&this.noButton.addEventListener("click",(()=>{setCookie("age-verified","false"),this.handleNoButtonClick()})),this.yesButton&&this.yesButton.addEventListener("click",(()=>{this.setAgeVerifiedTrue(),this.hide()}))}setAgeVerifiedTrue(){setCookie("age-verified","true")}handleNoButtonClick(){window.history.length>1?window.history.back():window.location.href=this.noButton.href}show(){super.show(),this.classList.contains("age-verification-popup--blurred")&&document.body.classList.add("age-verification-popup-is-open")}hide(){super.hide(),document.body.classList.remove("age-verification-popup-is-open"),this.getAttribute("data-open-in-design-mode")&&this.removeAttribute("data-open-in-design-mode"),this.newsletterPopup&&this.newsletterPopup.classList.remove("newsletter-popup-is-hidden")}}customElements.define("age-verification-popup",AgeVerificationPopup)