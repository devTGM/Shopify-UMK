if(!customElements.get("card-product-slider")){class e extends HTMLElement{constructor(){super();const e=JSON.parse(this.getAttribute("data-swiper-options"))||{};this.sliderWrapper=this.querySelector(".swiper-wrapper"),this.requiresFetch=this.hasAttribute("data-url"),this.parent=this.closest("[data-section-id]"),this.sliderOptions={a11y:!1,threshold:3,spaceBetween:e.spaceBetweenMobile||2,slidesPerView:e.slidesPerViewMobile||"auto",resistanceRatio:.72,breakpoints:{750:{slidesPerView:3,spaceBetween:e.spaceBetweenDesktop||2},1100:{slidesPerView:4,spaceBetween:e.spaceBetweenDesktop||2}}},e.navigation&&(this.sliderOptions.navigation={...e.navigation}),e.autoplay&&(this.sliderOptions.autoplay={...e.autoplay}),e.loop&&(this.sliderOptions.loop=e.loop)}connectedCallback(){this.requiresFetch?this.fetchItems():(this.initSlider(),this.syncHeights(),window.addEventListener("resize",(()=>this.syncHeights())))}syncHeights(){const e=this.querySelector(".products-feed__card-text-custom-slide"),t=this.querySelector(".product-card__actions");if(e&&t){const i=t.offsetHeight;e.style.height=`${i}px`}}fetchItems(){if(!this.parent)throw new Error("Parent is missing");fetch(this.getAttribute("data-url")).then((e=>e.text())).then((e=>{const t=(new DOMParser).parseFromString(e,"text/html").querySelector(".swiper-wrapper");t&&t.innerHTML.trim().length&&(this.querySelector(".swiper-wrapper").innerHTML=t.innerHTML,this.parent.classList.remove("hidden"),this.initSlider())})).catch((e=>{console.error(e)}))}initSlider(e=this){if(this.slider=new Swiper(e,this.sliderOptions),this.slider.wrapperEl.setAttribute("aria-live","polite"),this.slider.wrapperEl.id=`swiper-wrapper-${this.dataset.sectionId}`,this.slider.slides.forEach(((e,t)=>{e.setAttribute("role","group"),e.setAttribute("aria-label",`${t+1} / ${this.slider.slides.length}`),e.dataset.index=t})),this.swiperOptions?.navigation){[this.slider.navigation.prevEl,this.slider.navigation.nextEl].forEach(((e,t)=>{let i="Previous";1===t&&(i="Next"),e.setAttribute("aria-label",`${i} slide`),e.setAttribute("aria-controls",this.slider.wrapperEl.id)}))}this.slider.wrapperEl.addEventListener("focusin",(e=>{this.slider.el.scrollLeft=0;const t=e.target.closest(".swiper-slide"),i=+t.dataset.index,s=0===i,r=i===this.slider.slides.length-1;if(s||r)return void this.slider.slideTo(i,0);const a=t.getBoundingClientRect(),l=this.slider.wrapperEl.clientWidth,o=a.x+a.width-(document.body.clientWidth-l)/2;o<=l&&o>=a.width||(o>=a.width?this.slider.slideNext(0):this.slider.slidePrev(0))}));const t=JSON.parse(this.getAttribute("data-swiper-options"))||{};this.slider.wrapperEl.addEventListener("mouseenter",(()=>this.slider.autoplay.stop())),this.slider.wrapperEl.addEventListener("mouseleave",(()=>{!this.classList.contains("product--open-on-quick-cart")&&this.sliderOptions.autoplay&&this.slider.autoplay.start(),!1===t.autoplay&&this.slider.autoplay.stop()})),this.hasAttribute("data-init-quick-cart")&&document.querySelector("quick-cart-drawer")&&this.querySelector(".swiper-slide")&&document.querySelector("quick-cart-drawer").init(),this.querySelectorAll("product-card").forEach((e=>{e.init()})),Shopify.designMode&&this.hasAttribute("data-init-quick-cart")&&document.querySelector("quick-cart-drawer")&&this.querySelector(".swiper-slide")&&document.querySelector("quick-cart-drawer").init()}}customElements.define("card-product-slider",e)}