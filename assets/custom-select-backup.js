if(!customElements.get("custom-select")){class t extends HTMLElement{constructor(){super(),this.selectEl=this.querySelector("select"),this.createCustomSelect(),this.dropdown=this.querySelector(".js-dropdown"),this.btnToggleDropdown=this.querySelector(".js-btn-dropdown"),this.listOptions=this.querySelector(".js-list-options"),this.isExpanded=!1,this.selectLabel=this.getAttribute("data-label"),window.addEventListener("shopify:section:load",(()=>{clearTimeout(this.loadTimeout)})),window.addEventListener("resize",(()=>{if(window.innerWidth<tabletWidth)return;+this.btnToggleDropdown.style.width.replace("px","")===this.dropdown.clientWidth||(this.btnToggleDropdown.style.width=`${this.dropdown.clientWidth}px`)})),this.btnToggleDropdown.addEventListener("click",(t=>{t.preventDefault();this.classList.contains("is-expanded")?this.hideDropdown():this.showDropdown()})),this.btnToggleDropdown.addEventListener("keydown",(t=>{if(t.key.includes("Arrow")){t.preventDefault();const e=t.key.includes("Right"),s=t.key.includes("Left")||e;if(this.isExpanded&&s)return;const i=e||t.key.includes("Down"),n=this.listOptions.querySelector(".js-btn-option.is-selected"),o=n.parentElement;let l=i?o.nextElementSibling?.firstElementChild:o.previousElementSibling?.firstElementChild;return l||(l=i?this.listOptions.firstElementChild.firstElementChild:this.listOptions.lastElementChild.firstElementChild),void this.changeSelectedOption(n,l)}if(!this.isExpanded)return;const e="Escape"===t.key,s="Tab"===t.key;(e||s)&&(t.preventDefault(),this.hideDropdown())})),this.listOptions.addEventListener("click",(t=>{if(!t.target.classList.contains("js-btn-option"))return;t.preventDefault();const e=t.target,s=e.classList.contains("is-selected");this.hideDropdown(),s||this.changeSelectedOption(void 0,e)})),document.addEventListener("click",(t=>{if(!this.isExpanded)return;t.target.closest("custom-select")===this||this.hideDropdown()}))}createCustomSelect(){this.getAttribute("data-label");const t=this.querySelectorAll("option"),e=this.selectEl.querySelector('option[selected="selected"]');let s="";t.forEach((t=>{const e=`\n          <li class="custom-select__item">\n            <button\n              type="button"\n              class="custom-select__option button-reset js-btn-option ${t.selected?"is-selected":""}"\n              data-value="${t.value}"\n              tabindex="-1"\n              aria-selected="${t.selected}"\n            >${t.textContent}</button>\n          </li>\n        `;s+=e}));const i=`\n        <div class="custom-select__wrapper">\n          <button\n            type="button"\n            class="custom-select__btn button-reset focus-inset js-btn-dropdown facets__button-custom"\n            aria-controls="${this.dataset.dropdownId}"\n            aria-expanded="false"\n          >\n            ${e.textContent} ${this.dataset.iconChevronDown}\n          </button>\n          <div class="custom-select__dropdown js-dropdown" id="${this.dataset.dropdownId}">\n            <ul class="custom-select__items list-unstyled js-list-options">\n              ${s}\n            </ul>\n          </div>\n        </div>\n      `;this.insertAdjacentHTML("afterbegin",i),this.dataset.value=e.value}changeSelectedOption(t=this.listOptions.querySelector(".js-btn-option.is-selected"),e){this.btnToggleDropdown.innerHTML=e.textContent+this.dataset.iconChevronDown,this.dataset.value=e.dataset.value,e.classList.add("is-selected"),e.setAttribute("aria-selected",!0),t.classList.remove("is-selected"),t.setAttribute("aria-selected",!1);const s=this.selectEl.querySelector('option[selected="selected"]'),i=this.selectEl.querySelector(`option[value="${this.dataset.value}"]`);s.removeAttribute("selected"),i.setAttribute("selected","selected");const n=new Event("input",{bubbles:!0});this.selectEl.dispatchEvent(n)}showDropdown(){this.isExpanded=!0,this.classList.add("is-expanded"),this.btnToggleDropdown.setAttribute("aria-expanded",!0)}hideDropdown(){this.isExpanded=!1,this.classList.remove("is-expanded"),this.btnToggleDropdown.setAttribute("aria-expanded",!1)}}customElements.define("custom-select",t)}
