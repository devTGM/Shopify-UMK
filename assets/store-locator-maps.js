let map,markers=[];const mapElement=document.getElementById("google_map");async function initMap(){const{Map:e}=await google.maps.importLibrary("maps"),{AdvancedMarkerElement:t}=await google.maps.importLibrary("marker"),o=document.querySelectorAll(".store-locator-card"),r=Array.from(document.querySelectorAll(".store-locator-card__longitude")).map((e=>e.textContent)),a=Array.from(document.querySelectorAll(".store-locator-card__latitude")).map((e=>e.textContent)),c=Array.from(document.querySelectorAll(".store-locator-card__coordinate-title")).map((e=>e.textContent)).map((e=>e.replace(/([A-Z])/g," $1").trim())),m=Array.from(document.querySelectorAll(".store-locator-card__address")).map((e=>e.textContent)),n=Array.from(document.querySelectorAll(".store-locator-card__opening-hour")).map((e=>e.innerHTML)),l=Array.from(document.querySelectorAll(".store-locator-card__actions")).map((e=>e.innerHTML)),s=Number(document.getElementById("google_map").dataset.mapZoomLevel)||4,d=s<=18?3:0,i=[];for(let k=0;k<r.length;k++){const L=k,A=Number(a[L]),b=c[L],E=m[L],v=E&&!b?E:b;A&&i.push([`<b>${v}</b><br/><a href="https://maps.google.com/?q=${A},${Number(r[k])}" target="_blank" style="text-decoration: underline;">Location</a>`,A,Number(r[k])])}const u=Math.min(...r),p=Math.min(...a),_=Math.max(...r),g=(p+Math.max(...a))/2,y=(u+_)/2;if("undefined"==typeof google||void 0===google.maps)return;map=new e(mapElement,{zoom:s,center:{lat:g,lng:y},scrollwheel:!0,gestureHandling:"greedy",disableDefaultUI:!0,backgroundColor:"#89b4f8",mapId:"4504f8b37365c3d0"});mapElement.dataset.mapPinIcon,new google.maps.InfoWindow({maxWidth:200});const f=(e,t)=>{e.addEventListener("click",(function(){map.panTo(new google.maps.LatLng(i[t][1],i[t][2])),map.setZoom(s+d)}))};for(let w=0;w<i.length;w++){f(o[w],w);const q=document.createElement("div"),S=document.createElement("div"),M=document.createElement("div"),x=document.createElement("div"),C=document.createElement("div");q.className="store-locator__map--custom-marker",q.setAttribute("id",`store-locator__map--custom-marker--${w}`),S.className="store-locator__map--custom-marker--label",S.textContent=c[w],M.className="store-locator__map--custom-marker--point",x.className="store-locator__map--custom-marker--hours",x.innerHTML=n[w],C.className="store-locator__map--custom-marker--buttons",C.innerHTML=l[w],q.appendChild(S),q.appendChild(M),S.appendChild(x),S.appendChild(C);const N=new t({position:new google.maps.LatLng(i[w][1],i[w][2]),map:map,content:q});function h(){document.querySelectorAll(".store-locator__map--custom-marker").forEach((e=>e.classList.remove("store-locator__map--custom-marker--active"))),document.querySelectorAll(".store-locator-card").forEach((e=>e.removeAttribute("style")))}markers=[...markers,N],google.maps.event.addListener(N,"click",function(e,t){return function(){let e;e=window.innerWidth<=750?new google.maps.LatLng(i[w][1]-5,i[w][2]):new google.maps.LatLng(i[w][1],i[w][2]),map.panTo(e),document.querySelectorAll(".store-locator__map--custom-marker").forEach((e=>e.classList.remove("store-locator__map--custom-marker--active"))),document.getElementById(`store-locator__map--custom-marker--${t}`).classList.add("store-locator__map--custom-marker--active");(!document.querySelector(".store-locator__map-layout").classList.contains("store-locator__map-layout--with-search")||window.innerWidth<750)&&(document.querySelectorAll(".store-locator-card").forEach((e=>e.style.display="none")),document.querySelector(`[data-marker-index="${t}"]`).style.display="block")}}(0,w)),map.addListener("click",(()=>{h()}));document.querySelectorAll(".store-locator-card__cross").forEach((e=>{e.addEventListener("click",(()=>{h()}))}))}}initMap()